(this.webpackJsonpgumbo=this.webpackJsonpgumbo||[]).push([[0],{25:function(e,t,a){e.exports=a(40)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),l=a.n(i),c=a(1),o=(a(30),a(24)),s=a(4),u=a(5),p=a(7),h=a(6),m=a(3),d=a(8),b=(a(31),a(11)),g=a(14),E=(a(32),{API_ENDPOINT:"https://warm-castle-96285.herokuapp.com/api"}),f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(g.a)({},e.target.name,e.target.value))},a.addUser=function(e){if(e.preventDefault(),""!==a.state.email&&""!==a.state.password){var t=new Headers;t.append("Content-Type","application/json");var n={method:"POST",headers:t,body:JSON.stringify({email:a.state.email,password:a.state.password})},r=new Request("".concat(E.API_ENDPOINT,"/users"),n);fetch(r).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){return a.props.history.push("/login")})).catch((function(e){400===e.status&&a.setState({error:"email already taken"})}))}else a.setState({error:"Please add password and email"})},a.state={email:"",password:"",error:""},a.addUser=a.addUser.bind(Object(m.a)(a)),a.handleChange=a.handleChange.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",{id:"intro"},r.a.createElement("h2",null," New To Gumbo?"),r.a.createElement("p",null," Take the quiz below to learn your flavor profile and sign up")),""!==this.state.error&&r.a.createElement("section",{id:"error"},this.state.error),r.a.createElement("section",{id:"signup"},r.a.createElement("h2",null," Sign Up, Your Tastebuds Will Thank You"),r.a.createElement("form",null,r.a.createElement("label",{for:"#text-area"}," Email: "),r.a.createElement("input",{id:"text-area",type:"text",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("label",{for:"#text-area"}," Password: "),r.a.createElement("input",{id:"text-area",type:"password",name:"password",onChange:this.handleChange,value:this.state.password}),r.a.createElement("button",{class:"regular-button",type:"submit",onClick:this.addUser}," Submit")),r.a.createElement("h4",null," Already a Member? ",r.a.createElement(c.b,{to:"/login"}," Login"))))}}]),t}(r.a.Component),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).logout=function(){localStorage.clear("token"),a.props.history.push("/")},a.handleChange=function(e){a.setState(Object(g.a)({},e.target.name,e.target.value))},a.state={email:"",password:"",error:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.login=a.login.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"login",value:function(e){var t=this;if(e.preventDefault(),""!==this.state.email&&""!==this.state.password){var a=new Headers;a.append("Content-Type","application/json");var n={method:"POST",headers:a,body:JSON.stringify({email:this.state.email,password:this.state.password})},r=new Request("".concat(E.API_ENDPOINT,"/auth/login"),n);fetch(r).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){localStorage.setItem("authToken",e.authToken),t.props.history.push("/saved")})).catch((function(e){400===e.status&&t.setState({error:"Incorrect username or password"})}))}else this.setState({error:"Please add password and email"})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",{id:"login"},localStorage.authToken?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," Logout"),r.a.createElement("button",{style:{backgroundColor:"white"},onClick:this.logout}," Log me out!")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," Login, Your Tastebuds Will Thank You"),r.a.createElement("form",null,r.a.createElement("label",{for:"#text-area"}," Email: "),r.a.createElement("input",{id:"text-area",type:"text",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("label",{for:"#text-area"}," Password: "),r.a.createElement("input",{id:"text-area",type:"password",name:"password",onChange:this.handleChange,value:this.state.password}),r.a.createElement("button",{class:"regular-button",type:"submit",onClick:this.login}," Submit"))," "),r.a.createElement("h4",null," Not a member yet? ",r.a.createElement(c.b,{to:"/signup"},"Sign Up"))))}}]),t}(r.a.Component),O=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"how-section"},r.a.createElement("section",{id:"intro"},r.a.createElement("h2",null," Your Taste Preferences"),r.a.createElement("p",null," How it works, take this quiz to figure out what your flavor profile is")),r.a.createElement("section",{id:"howto"},r.a.createElement("h2",null," How It Works"),r.a.createElement("p",null," How it works, take this quiz to figure out what your flavor profile is")),r.a.createElement("section",{id:"screenshot"},r.a.createElement("h2",null," Try It Out"),r.a.createElement("p",null," How it works, take this quiz to figure out what your flavor profile is")))}}]),t}(n.Component),j=(a(38),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"howto"},r.a.createElement("h2",null," Search for Recipes Tailored to Your Tastebuds"),r.a.createElement("form",{onSubmit:e.getRecipe},r.a.createElement("label",{htmlFor:"ingredients"}," List up to 4 main ingredients: "),r.a.createElement("input",{id:"ingredients",type:"text"}),r.a.createElement("button",{className:"regular-button"},"Submit"))),r.a.createElement("table",null,r.a.createElement("tbody",null,e.results),r.a.createElement("br",null)))}),R=(a(39),function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return localStorage.getItem("authToken")?r.a.createElement("div",null,r.a.createElement("section",{id:"intro"},r.a.createElement("h2",null," Your Saved Searches & Recipe"),r.a.createElement("p",null," See below for saved searches, or find the dish nearby")),r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,this.props.savedRecipes.map((function(t){return r.a.createElement("tr",{key:t.id,id:t.id},r.a.createElement("td",null,r.a.createElement("a",{href:t.recipeurl,target:"_blank"}," ",r.a.createElement("img",{src:t.thumbnail}))),r.a.createElement("td",null,"Recipe Title ",r.a.createElement("br",null)," ",r.a.createElement("b",null,r.a.createElement("a",{href:t.recipeurl,target:"_blank"},t.title)),r.a.createElement("br",null),"Ingredients: ",r.a.createElement("br",null)," ",r.a.createElement("b",null,t.ingredients)),r.a.createElement("td",null,r.a.createElement(c.b,{to:"/edit/".concat(t.id)},"","Edit"),r.a.createElement("button",{onClick:function(a){e.props.delRecipe(t.id,a)}},r.a.createElement("img",{id:"delete",src:"https://img.icons8.com/bubbles/50/000000/delete-sign.png"}))))})))))):r.a.createElement("div",null,"Login please")}}]),t}(n.Component)),y=Object(b.f)(R),w=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).addRecipe=function(t){t.preventDefault();var a=new Headers;a.append("Content-Type","application/json"),a.append("Authorization","bearer "+localStorage.getItem("authToken"));var n={method:"POST",headers:a,body:JSON.stringify({title:e.props.recipe.title,thumbnail:e.props.recipe.thumbnail,ingredients:e.props.recipe.ingredients,recipeurl:e.props.recipe.href})},r=new Request("".concat(E.API_ENDPOINT,"/recipes"),n);fetch(r).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){return e})).catch((function(e){401===e.status&&alert("You must login or create a signup")}))},e.state={error:""},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("a",{href:this.props.recipe.href,target:"_blank"}," ",r.a.createElement("img",{src:this.props.recipe.thumbnail}))),r.a.createElement("td",null,"Recipe Title ",r.a.createElement("br",null)," ",r.a.createElement("b",null,r.a.createElement("a",{href:this.props.recipe.href,target:"_blank"},this.props.recipe.title)),r.a.createElement("br",null),"Ingredients: ",r.a.createElement("br",null)," ",r.a.createElement("b",null,this.props.recipe.ingredients),r.a.createElement("br",null)),r.a.createElement("tr",null,r.a.createElement("button",{onClick:this.addRecipe},r.a.createElement("img",{id:"add",src:"https://img.icons8.com/cute-clipart/64/000000/love-potion.png"}))),r.a.createElement("br",null)),r.a.createElement("hr",null))}}]),t}(n.Component),T=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.savedRecipes,a=parseInt(this.props.match.params.id),n=t.filter((function(e){return e.id===a}));return r.a.createElement(r.a.Fragment,null,t.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"intro"},r.a.createElement("h2",null," Edit Recipe: ",n[0].title),r.a.createElement("p",null," See below for saved searches, or find the dish nearby")),r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"recipe-title"},"Recipe Title",r.a.createElement("input",{type:"text",placeholder:n[0].title,value:this.props.editRecipeTitle,onChange:this.props.onChangeRecipeTitle})),r.a.createElement("label",null," Ingredients",r.a.createElement("input",{type:"text-area",placeholder:n[0].ingredients,value:this.props.editRecipeIngredients,onChange:this.props.onChangeRecipeIngredients})),r.a.createElement("button",{type:"submit",className:"regular-button",onClick:function(t){e.props.updateRecipe(a,t)}}," Submit")))):r.a.createElement("div",null,"Loading"))}}]),t}(n.Component),S=Object(b.f)(T),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(g.a)({},e.target.name,e.target.value))},a.state={title:"",recipe:"",error:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.newRecipe=a.newRecipe.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"newRecipe",value:function(e){var t=this;e.preventDefault(),fetch("".concat(E.API_ENDPOINT,"/recipes"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({title:this.state.title,ingredients:this.state.recipe})}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){window.location=window.location.origin+"/saved"})).catch((function(e){400===e.status&&t.setState({error:"recipe not saved"})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"#text-area"}," Title: "),r.a.createElement("input",{id:"text-area",type:"text",name:"title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"#recipe-area"}," Recipe: "),r.a.createElement("input",{id:"recipe-area",type:"text",name:"recipe",value:this.state.recipe,onChange:this.handleChange}),r.a.createElement("button",{type:"submit",className:"regular-button",onClick:function(t){e.newRecipe(t)}}," Submit")))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getRecipe=function(e){e.preventDefault();e.target.elements.ingredients.value;a.state.flavor.length>=1?(fetch("".concat(E.API_ENDPOINT,"/recipes/")).then((function(e){return e.json()})).then((function(e){var t=[];e.forEach((function(e){var n=r.a.createElement(w,{recipe:e});t.push(n),a.setState({recipes:t})}))})),1===a.state.flavor.length&&fetch("".concat(E.API_ENDPOINT,"/recipes")).then((function(e){return e.json()})).then((function(e){var t=[];e.forEach((function(e){var n=r.a.createElement(w,{recipe:e});t.push(n),a.setState({recipes:t})}))}))):0===a.state.flavor.length&&fetch("".concat(E.API_ENDPOINT,"/recipes")).then((function(e){return e.json()})).then((function(e){console.log("data",e);var t=[];e.forEach((function(e){var n=r.a.createElement(w,{recipe:e});t.push(n),a.setState({recipes:t})}))})),e.target.reset()},a.setFlavor=a.setFlavor.bind(Object(m.a)(a)),a.state={ingredients:[],flavor:[],recipes:[],email:"",password:"",savedRecipes:[],editRecipeTitle:"",editRecipeIngredients:"",error:""},a.delRecipe=a.delRecipe.bind(Object(m.a)(a)),a.onChangeRecipeTitle=a.onChangeRecipeTitle.bind(Object(m.a)(a)),a.onChangeRecipeIngredients=a.onChangeRecipeIngredients.bind(Object(m.a)(a)),a.updateRecipe=a.updateRecipe.bind(Object(m.a)(a)),a.Footer=a.Footer.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onChangeRecipeTitle",value:function(e){this.setState({editRecipeTitle:e.target.value})}},{key:"onChangeRecipeIngredients",value:function(e){this.setState({editRecipeIngredients:e.target.value})}},{key:"delRecipe",value:function(e,t){var a=this,n={method:"DELETE",headers:{Accept:"application/json",Authorization:"bearer "+localStorage.getItem("authToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}},r=new Request("".concat(E.API_ENDPOINT,"/recipes/")+e,n);fetch(r).then((function(e){if(204!==e.status)throw new Error("Did not delete")})).then((function(){var t=Object(o.a)(a.state.savedRecipes),n=t.findIndex((function(t){return t.id===e}));-1!==n&&(t.splice(n,1),a.setState({savedRecipes:t}))}))}},{key:"updateRecipe",value:function(e,t){var a=this,n={method:"PUT",headers:{Accept:"application/json",Authorization:"bearer "+localStorage.getItem("authToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({title:this.state.editRecipeTitle,ingredients:this.state.editRecipeIngredients})},r=new Request("".concat(E.API_ENDPOINT,"/recipes/")+e,n);fetch(r).then((function(e){if(200!==e.status)throw new Error("Did not update");return e.json()})).then((function(t){a.state.savedRecipes.findIndex((function(t){return t.id===e}))})).catch((function(e){400===e.status&&a.setState({error:"Incorrect username or password"})}))}},{key:"setFlavor",value:function(e){return this.state.flavor.indexOf(e),this.state.flavor.unshift(e),this.setState({flavor:this.state.flavor})}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(E.API_ENDPOINT,"/recipes"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("authToken")}}).then((function(e){return e.json()})).then((function(t){e.setState({savedRecipes:t})}))}},{key:"NavBar",value:function(){return r.a.createElement("nav",null,r.a.createElement(c.b,{to:"/"}," ","About"),localStorage.authToken?r.a.createElement(c.b,{to:"/login"}," ","Logout"):r.a.createElement(c.b,{to:"/signup"}," ","Sign Up"),r.a.createElement(c.b,{to:"/search"}," ","Search"),r.a.createElement(c.b,{to:"/saved"}," ","Saved Recipes"),localStorage.authToken&&r.a.createElement(c.b,{to:"new"},"Add Recipes"))}},{key:"MainPage",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("header",null,r.a.createElement(c.b,{to:"/"}," ","Gumbo ",r.a.createElement("br",null),"Feed Your Tastebuds"),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/signup"},r.a.createElement("button",{className:"regular-button",type:"button"},"Find Recipes For My Tastebuds!"))),r.a.createElement("main",null,r.a.createElement(O,null)))}},{key:"Footer",value:function(){return"/signup"!==this.props.location.pathname&&"/saved"!==this.props.location.pathname&&!this.props.location.pathname.includes("/edit")&&"/login"!==this.props.location.pathname&&r.a.createElement("footer",null,r.a.createElement("section",{id:"signup"},r.a.createElement("h2",null," Want to find more to eat? Sign Up!"),r.a.createElement("form",null," ",r.a.createElement("label",{htmlFor:"#text-area"}," User Name: ",r.a.createElement("input",{id:"text-area",type:"text-area",label:"name"})),r.a.createElement("label",{htmlFor:"#text-area"}," Password: ",r.a.createElement("input",{id:"text-area",type:"text-area",label:"name"}),r.a.createElement("button",{className:"regular-button"},"Sign Up"),r.a.createElement("h4",null," Already a Member? ",r.a.createElement(c.b,{to:"/signup"}," Login "))),"  ")))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(b.a,{path:"/",component:this.NavBar}),r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/",component:this.MainPage}),r.a.createElement(b.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(f,e)}}),r.a.createElement(b.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(v,Object.assign({},t,{login:e.login}))}}),r.a.createElement(b.a,{path:"/search",render:function(t){return r.a.createElement(j,Object.assign({},t,{getRecipe:e.getRecipe,value:e.state.ingredients,setFlavor:e.setFlavor,recipes:e.state.recipeDeets,results:e.state.recipes}))}}),r.a.createElement(b.a,{path:"/saved",render:function(t){return r.a.createElement(y,Object.assign({},t,{delRecipe:e.delRecipe,savedRecipes:e.state.savedRecipes,updateSavedRecipeState:e.updateSavedRecipeState}))}}),r.a.createElement(b.a,{path:"/edit/:id",render:function(t){return r.a.createElement(S,Object.assign({},t,{savedRecipes:e.state.savedRecipes,onChangeRecipeTitle:e.onChangeRecipeTitle,onChangeRecipeIngredients:e.onChangeRecipeIngredients,updateRecipe:e.updateRecipe,editRecipeTitle:e.state.editRecipeTitle,editRecipeIngredients:e.state.editRecipeIngredients}))}}),r.a.createElement(b.a,{path:"/new",render:function(t){return r.a.createElement(k,Object.assign({},t,{updateSavedRecipeState:e.updateSavedRecipeState}))}})),r.a.createElement(b.a,{path:"/",component:this.Footer}))}}]),t}(n.Component),I=Object(b.f)(C);l.a.render(r.a.createElement(c.a,null,r.a.createElement(I,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.3b6b274c.chunk.js.map